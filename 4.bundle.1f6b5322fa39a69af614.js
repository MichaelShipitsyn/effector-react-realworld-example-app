(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"38gM":function(e,t,r){"use strict";r.r(t);var n=r("oNR1"),c=r("dY8W"),a=r("UYjC"),i=r("USb2"),o=r("6le1"),s=r("SugE"),u=r("xArF"),l=r("eZyy");function j(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=Object(s.d)(),O=Object(s.c)((function(e){return l.a.get("articles/".concat(e,"/comments")).then((function(e){return e.data.comments}))})),f=Object(s.c)((function(e){var t=e.slug,r=e.body;return l.a.post("articles/".concat(t,"/comments"),{body:r}).then((function(e){return e.data.comment}))})),m=Object(s.c)((function(e){var t=e.slug,r=e.id;return l.a.delete("articles/".concat(t,"/comments/").concat(r))})),h=Object(c.a)(),p=h.state.map((function(e){return e.slug})),g=Object(s.i)(O.doneData,[]).on(f.doneData,(function(e,t){return[t].concat(j(e))})).on(m.done,(function(e,t){var r=t.params;return e.filter((function(e){return e.id!==r.id}))})),v=Object(u.a)({fields:{comment:{init:""}}});Object(s.f)({from:p.updates,to:Object(s.a)({source:p,effect:O})}),Object(s.f)({from:v.submit,to:Object(s.a)({source:{slug:p,body:v.fields.comment.$value},effect:f})}),Object(s.f)({from:f,to:v.reset}),Object(s.j)({source:p,clock:d,fn:function(e,t){return{slug:e,id:t}},target:m});var x=Object(s.e)({errors:{}}).on([f.failData,m.failData],(function(e,t){var r;return null===(r=t.response)||void 0===r?void 0:r.data})).reset(v.$touched),y=r("7E9e"),w=r("oYCi"),N=function(e){var t=e.onClick;return Object(w.jsx)(a.b,{className:"mod-options btn-delete",onClick:t,children:Object(w.jsx)("i",{className:"ion-trash-a"})})},P=function(e){var t=e.author,r=e.createdAt,n=e.id,a=Object(c.d)(y.a.$user).username===t.username;return Object(w.jsxs)("div",{className:"card-footer",children:[Object(w.jsx)(i.a,{className:"comment-author",to:"/@".concat(t.username),children:Object(w.jsx)("img",{alt:t.username,className:"comment-author-img",src:t.image})})," ",Object(w.jsx)(i.a,{className:"comment-author",to:"/@".concat(t.username),children:t.username}),Object(w.jsx)("span",{className:"date-posted",children:new Date(r).toDateString()}),Object(w.jsx)(o.a,{check:"auth",children:a&&Object(w.jsx)(N,{onClick:function(){return d(n)}})})]})};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=function(e){var t=e.comment;return Object(w.jsxs)("div",{className:"card",children:[Object(w.jsx)("div",{className:"card-block",children:Object(w.jsx)("p",{className:"card-text",children:t.body})}),Object(w.jsx)(P,D({},t))]})},A=function(){return Object(w.jsx)(a.i,{children:Object(c.c)(g,{getKey:function(e){return e.id},fn:function(e){return Object(w.jsx)(C,{comment:e})}})})},E=function(){var e=Object(c.d)(x);return Object(w.jsx)(a.d,{errors:e})},$=function(){var e=Object(c.d)(y.a.$user),t=e.image,r=e.username;return Object(w.jsxs)("div",{className:"card-footer",children:[Object(w.jsx)("img",{alt:r,className:"comment-author-img",src:t}),Object(w.jsx)(a.b,{className:"btn-sm btn-primary",type:"submit",children:"Post Comment"})]})},F=function(){var e=Object(u.c)(v),t=e.submit,r=e.fields;return Object(w.jsxs)(a.e,{className:"card comment-form",onSubmit:function(e){e.preventDefault(),t()},children:[Object(w.jsx)("div",{className:"card-block",children:Object(w.jsx)(a.s,{placeholder:"Write a comment...",rows:3,value:r.comment.value,onChange:function(e){return r.comment.onChange(e.target.value)}})}),Object(w.jsx)($,{})]})},L=function(e){var t=e.slug;return Object(c.b)(h,{slug:t}),Object(w.jsxs)("div",{className:"col-xs-12 col-md-8 offset-md-2",children:[Object(w.jsxs)(o.a,{check:"auth",children:[Object(w.jsx)(E,{}),Object(w.jsx)(F,{})]}),Object(w.jsx)(o.a,{check:"anon",children:Object(w.jsxs)("p",{children:[Object(w.jsx)(i.a,{to:"/login",children:"Sign in"})," or ",Object(w.jsx)(i.a,{to:"/register",children:"sign up"})," to add comments on this article."]})}),Object(w.jsx)(A,{})]})};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}var R=Object(s.d)(),T=Object(s.c)((function(e){return l.a.get("articles/".concat(e)).then((function(e){return e.data.article})).then((function(e){var t=e.createdAt;return I(I({},z(e,["createdAt"])),{},{createdAt:new Date(t).toDateString()})}))})),W=Object(s.c)((function(e){return l.a.delete("articles/".concat(e))})),M=Object(c.a)(),q=M.state.map((function(e){return e.slug})),G=Object(s.i)(T.doneData,{title:"",slug:"",body:"",createdAt:"",updatedAt:"",tagList:[],description:"",author:{username:"",bio:"",image:"",following:!1},favorited:!1,favoritesCount:0}),H=Object(s.b)(G,y.a.$user,(function(e,t){return e.author.username===t.username}));Object(s.f)({from:M.open,to:Object(s.a)({source:q,effect:T})}),Object(s.f)({from:R,to:Object(s.a)({source:q,effect:W})}),W.done.watch((function(){o.d.history.push("/")}));var J=r("nOdE"),Z=function(){var e=Object(c.d)(G).tagList;return Object(w.jsx)(a.q,{children:e.map((function(e){return Object(w.jsx)(a.p,{children:e.toLowerCase()},e)}))})},K=function(){var e=Object(c.d)(G).body;return Object(w.jsx)(a.n,{className:"article-content",children:Object(w.jsxs)("div",{className:"col-xs-12",children:[Object(w.jsx)(J.a,{children:e}),Object(w.jsx)(Z,{})]})})},B=r("rEH3"),Q=function(){var e=Object(c.d)(H),t=Object(c.d)(G).slug;return Object(w.jsx)(w.Fragment,{children:e&&Object(w.jsxs)("span",{children:[Object(w.jsx)(i.a,{to:"/editor/".concat(t),children:Object(w.jsxs)(a.b,{className:"btn-sm btn-outline-secondary",children:[Object(w.jsx)("i",{className:"ion-edit"})," Edit Article"]})}),Object(w.jsxs)(a.b,{className:"btn-sm btn-outline-danger",onClick:R,children:[Object(w.jsx)("i",{className:"ion-trash-a"})," Delete Article"]})]})})},V=function(){var e=Object(c.d)(G),t=e.title,r=e.author,n=e.createdAt;return Object(w.jsx)(a.a,{children:Object(w.jsxs)(a.c,{children:[Object(w.jsx)("h1",{children:t}),Object(w.jsx)(B.a,{author:r,createdAt:n,children:Object(w.jsx)(Q,{})})]})})};t.default=function(){var e=Object(n.g)().slug;Object(c.b)(M,{slug:e});var t=Object(c.d)(T.pending);return Object(w.jsx)(w.Fragment,{children:!t&&Object(w.jsxs)("div",{className:"article-page",children:[Object(w.jsx)(V,{}),Object(w.jsxs)(a.l,{children:[Object(w.jsx)(K,{}),Object(w.jsx)("hr",{}),Object(w.jsx)("div",{className:"article-actions"}),Object(w.jsxs)(a.n,{children:[Object(w.jsx)(L,{slug:e}),Object(w.jsx)("div",{})]})]})]})})}},kI28:function(e,t){},rEH3:function(e,t,r){"use strict";r.d(t,"e",(function(){return j})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return p})),r.d(t,"a",(function(){return f})),r.d(t,"d",(function(){return g}));var n=r("SugE"),c=r("dY8W"),a=r("eZyy"),i=r("6le1");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={currentPage:1,pageSize:10,status:Object(n.e)("initial")},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=s(s({},l),e),r=Object(n.d)(),o=Object(n.d)(),u=Object(n.c)((function(e){return a.a.post("articles/".concat(e,"/favorite")).then((function(e){return e.data}))})),j=Object(n.c)((function(e){return a.a.delete("articles/".concat(e,"/favorite")).then((function(e){return e.data}))})),b=Object(n.e)(t.pageSize),d=i.d.$search.map((function(e){var t;return null!==(t=new URLSearchParams(e).get("tag"))&&void 0!==t?t:""})),O=i.d.$search.map((function(e){var r,n=null!==(r=new URLSearchParams(e).get("page"))&&void 0!==r?r:t.currentPage;return Number(n)})),f=Object(n.e)({articles:[],articlesCount:0}).on([u.done,j.done],(function(e,t){var r=t.params,n=t.result;return s(s({},e),{},{articles:e.articles.map((function(e){return e.slug!==r?e:s(s({},e),{},{favorited:n.article.favorited,favoritesCount:n.article.favoritesCount})}))})})),m=f.map((function(e){return e.articles})),h=f.map((function(e){return e.articlesCount})),p=t.status,g=Object(n.b)(p,m,(function(e,t){return"done"===e&&0===t.length}));Object(n.j)({source:i.d.$pathname,clock:r,fn:function(e,t){return{path:e,page:t}}}).watch((function(e){var t=e.path,r=e.page;i.d.history.replace("".concat(t,"?page=").concat(r))})),Object(n.g)({source:o,filter:function(e){return!0===e.favorited},target:j.prepend((function(e){return e.slug}))}),Object(n.g)({source:o,filter:function(e){return!1===e.favorited},target:u.prepend((function(e){return e.slug}))}),Object(n.g)({source:u.failData,filter:function(e){var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)}}).watch((function(){i.d.history.push(i.b.LOGIN)}));var v=Object(n.b)({pageSize:b,currentPage:O,currentTag:d,totalPages:h,isEmptyFeed:g});return{Gate:Object(c.a)(),currentPageWasSet:r,favoriteToggled:o,setFavoriteArticleFx:u,setUnfavoriteArticleFx:j,$feed:f,$articles:m,$pageSize:b,$currentPage:O,$currentTag:d,$totalPages:h,$isEmptyFeed:g,useModel:function(){return Object(c.d)(v)}}},b=(r("kI28"),r("USb2")),d=r("UYjC"),O=r("oYCi"),f=function(e){var t=e.author,r=e.createdAt,n=e.children;return Object(O.jsxs)("div",{className:"article-meta",children:[Object(O.jsx)(b.a,{to:"/@".concat(t.username),children:Object(O.jsx)("img",{alt:t.username,src:t.image})}),Object(O.jsxs)("div",{className:"info",children:[Object(O.jsx)(b.a,{className:"author",to:"/@".concat(t.username),children:t.username}),Object(O.jsx)("span",{className:"date",children:new Date(r).toDateString()})]}),n]})},m=function(e){var t=e.active,r=e.onClick,n=e.children;return Object(O.jsxs)(d.b,{className:"btn btn-sm btn-outline-primary","data-active":t,onClick:r,children:[Object(O.jsx)("i",{className:"ion-heart"})," ",n]})},h=function(e){var t=e.data,r=t.author,n=t.createdAt,c=t.slug,a=t.title,i=t.description,o=t.tagList,s=t.favorited,u=t.favoritesCount,l=e.onClick;return Object(O.jsxs)("article",{className:"article-preview",children:[Object(O.jsx)(f,{author:r,createdAt:n,children:Object(O.jsx)("div",{className:"pull-xs-right",children:Object(O.jsx)(m,{active:s,onClick:l,children:u})})}),Object(O.jsxs)(b.a,{className:"preview-link",to:"/article/".concat(c),children:[Object(O.jsx)("h1",{children:a}),Object(O.jsx)("p",{children:i}),Object(O.jsx)("span",{children:"Read more..."}),Object(O.jsx)(d.q,{children:o.map((function(e){return Object(O.jsx)(d.p,{children:e.toLowerCase()},e)}))})]})]})},p=function(e){var t=e.children;return Object(O.jsx)("ul",{className:"articles-wrapper list-unstyled",children:t})},g=function(e){return e.show?Object(O.jsx)("div",{className:"empty-articles article-preview",children:"No articles are here... yet."}):null}}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"I+tg":function(e,r,t){"use strict";t.r(r),t.d(r,"EditorPage",(function(){return Y}));var n=t("dY8W"),o=t("UYjC"),i=t("xArF"),a=t("SugE"),u=Object(a.d)(),c=Object(a.d)(),s=Object(i.a)({fields:{currentTag:{init:""}}});Object(a.j)({source:s.fields.currentTag.$value,clock:Object(a.g)(c,{filter:function(e){return"Enter"===e.key}}),target:u}),Object(a.f)({from:u,to:s.reset});var l=t("oYCi"),f=function(){var e=Object(i.c)(s).fields;return Object(l.jsx)(o.e,{onSubmit:function(e){return e.preventDefault()},children:Object(l.jsx)(o.g,{autoComplete:"off",name:"tag-list",placeholder:"Enter tags",value:e.currentTag.value,onChange:function(r){return e.currentTag.onChange(r.target.value)},onKeyDown:c})})},d=t("eZyy"),b=t("rPMT");function m(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return v(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach((function(r){g(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function g(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function p(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var h=Object(a.d)();h.watch((function(e){return e.preventDefault()}));var y=Object(a.d)(),x=Object(a.c)((function(e){return d.a.post("articles",{article:e}).then((function(e){return e.data.article}))})),E=Object(a.c)((function(e){return d.a.get("articles/".concat(e)).then((function(e){var r=e.data.article;return{slug:r.slug,title:r.title,description:r.description,body:r.body,tagList:r.tagList}}))})),$=Object(n.a)(),w=$.state.map((function(e){return e.slug})),S=w.map(Boolean),V=S.map((function(e){return!e})),T=Object(i.a)({fields:{slug:{init:""},title:{init:""},description:{init:""},body:{init:""},tagList:{init:[]}}}),C=T.fields.tagList.$value;Object(a.g)({source:$.open,filter:S,target:Object(a.a)({source:w,effect:E})}),Object(a.f)({from:E.doneData,to:T.set}),Object(a.j)({source:T.$values,clock:u,fn:function(e,r){var t,n=e.tagList;return O(O({},p(e,["tagList"])),{},{tagList:(t=[].concat(m(n),[r]),Array.from(new Set(t)))})},target:T.set}),Object(a.j)({source:T.$values,clock:y,fn:function(e,r){var t=e.tagList;return O(O({},p(e,["tagList"])),{},{tagList:t.filter((function(e){return e!==r}))})},target:T.set}),Object(a.f)({from:[x.done,V],to:T.reset}),Object(a.j)({source:T.$values,clock:T.submit,target:x}),x.doneData.watch((function(e){var r=e.slug;b.d.history.replace("/article/".concat(r))}));var k=Object(a.e)({errors:{}}).on(x.failData,(function(e,r){var t;return null===(t=r.response)||void 0===t?void 0:t.data})).reset(T.$values,$.close),P=function(){var e=Object(n.d)(k);return Object(l.jsx)(o.d,{errors:e})},A=function(){var e=Object(i.b)(T.fields.body),r=e.value,t=e.name,n=e.onChange;return Object(l.jsx)(o.r,{name:t,placeholder:"Write your article (in markdown)",rows:8,value:r,onChange:function(e){return n(e.target.value)}})},D=function(){var e=Object(i.b)(T.fields.description),r=e.value,t=e.name,n=e.onChange;return Object(l.jsx)(o.h,{name:t,placeholder:"What's this article about?",value:r,onChange:function(e){return n(e.target.value)}})},F=function(){var e=Object(i.b)(T.fields.title),r=e.value,t=e.name,n=e.onChange;return Object(l.jsx)(o.h,{className:"form-control-lg",name:t,placeholder:"Article Title",value:r,onChange:function(e){return n(e.target.value)}})},L=function(){return Object(l.jsxs)(o.e,{id:"editor",onSubmit:h,children:[Object(l.jsx)(F,{}),Object(l.jsx)(D,{}),Object(l.jsx)(A,{})]})},B=function(){var e=Object(i.c)(T).submit,r=Object(n.d)(x.pending);return Object(l.jsx)(o.b,{className:"btn-lg btn-primary pull-xs-right",disabled:r,form:"editor",type:"submit",onClick:function(r){r.preventDefault(),e()},children:"Publish article"})},I=function(e){var r=e.children,t=e.onClick;return Object(l.jsxs)("span",{className:"tag-default tag-pill",children:[r,Object(l.jsx)(o.b,{className:"btn-sm editor-tag",onClick:t,children:Object(l.jsx)("i",{className:"ion-close-round"})})]})},N=function(){return Object(l.jsx)(o.q,{children:Object(n.c)(C,{getKey:function(e){return e},fn:function(e){return Object(l.jsx)(I,{onClick:function(){return y(e)},children:e})}})})},Y=function(e){var r=e.match.params.slug;return Object(n.b)($,{slug:r}),Object(l.jsx)(o.l,{children:Object(l.jsx)(o.n,{children:Object(l.jsxs)("div",{className:"col-md-10 offset-md-1 col-xs-12",children:[Object(l.jsx)(P,{}),Object(l.jsx)(L,{}),Object(l.jsx)(f,{}),Object(l.jsx)(N,{}),Object(l.jsx)(B,{})]})})})}},xArF:function(e,r,t){"use strict";t.d(r,"a",(function(){return b})),t.d(r,"b",(function(){return m})),t.d(r,"c",(function(){return v}));var n=t("YSF1"),o=t("dY8W");function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=function(e){var r=e.init,t=e.domain;return e.existing||(t?t.store(r):Object(n.createStore)(r))},s=function(e){var r=e.domain;return e.existing||(r?r.event():Object(n.createEvent)())};function l(e,r,t){var n,o,i,a,u,l,f,d,b,m,v,j="function"==typeof r.init?r.init():r.init,O=c({domain:t,existing:null===(n=r.units)||void 0===n?void 0:n.$value,init:j}),g=c({domain:t,existing:null===(o=r.units)||void 0===o?void 0:o.$errors,init:[]}),p=g.map((function(e){return e[0]?e[0]:null})),h=O.map((function(e){return e!==j})),y=c({domain:t,existing:null===(i=r.units)||void 0===i?void 0:i.$isTouched,init:!1}),x=s({domain:t,existing:null===(a=r.units)||void 0===a?void 0:a.onChange}),E=s({domain:t,existing:null===(u=r.units)||void 0===u?void 0:u.onBlur}),$=s({domain:t,existing:null===(l=r.units)||void 0===l?void 0:l.changed}),w=s({domain:t,existing:null===(f=r.units)||void 0===f?void 0:f.addError}),S=s({domain:t,existing:null===(d=r.units)||void 0===d?void 0:d.validate}),V=s({domain:t,existing:null===(b=r.units)||void 0===b?void 0:b.resetErrors}),T=s({domain:t,existing:null===(m=r.units)||void 0===m?void 0:m.resetValue}),C=s({domain:t,existing:null===(v=r.units)||void 0===v?void 0:v.reset});return{changed:$,name:e,$value:O,$errors:g,$firstError:p,$isValid:p.map((function(e){return null===e})),$isDirty:h,$isTouched:y,$touched:y,onChange:x,onBlur:E,addError:w,validate:S,set:x,reset:C,resetErrors:V,resetValue:T,filter:r.filter}}function f(e){var r,t=e.$form,o=e.validateFormEvent,a=e.submitEvent,c=e.resetFormEvent,s=e.resetValues,l=e.field,f=e.rules,d=e.resetErrors,b=e.formValidationEvents,m=e.fieldValidationEvents,v=l.$value,j=l.$errors,O=l.onBlur,g=l.changed,p=l.addError,h=l.validate,y=l.resetErrors,x=l.resetValue,E=l.reset,$="function"==typeof f?Object(n.createStore)([]):Object(n.combine)(f.map((function(e){return e.source||Object(n.createStore)(null)}))),w=(r=f,function(e,t,n){for(var o=[],i="function"==typeof r?r(e,t):r,a=0;a<i.length;a++){var c=i[a],s=n?n[a]:null,l=c.validator(e,t,s);"boolean"!=typeof l||l||o.push({rule:c.name,errorText:c.errorText,value:e}),"object"!=u(l)||l.isValid||o.push({rule:c.name,errorText:l.errorText,value:e})}return o}),S=[].concat(i(b),i(m)),V=[];S.includes("submit")&&V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:t,rulesSources:$}),clock:a})),S.includes("blur")&&V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:t,rulesSources:$}),clock:O})),S.includes("change")&&V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:t,rulesSources:$}),clock:Object(n.merge)([g,x,s])})),V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:t,rulesSources:$}),clock:h})),V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:t,rulesSources:$}),clock:o}));var T=Object(n.sample)({source:v,clock:p,fn:function(e,r){return{rule:r.rule,value:e,errorText:r.errorText}}});j.on(V,(function(e,r){var t=r.form,n=r.fieldValue,o=r.rulesSources;return w(n,t,o)})).on(T,(function(e,r){return[r].concat(i(e))})).reset(y,c,E,d),S.includes("change")||j.reset(g)}function d(e,r,t,o,i){var a=e.$value,u=e.$touched,c=e.onChange,s=e.changed,l=e.name,f=e.reset,d=e.resetValue,b=e.filter;u.on(s,(function(){return!0})).reset(f,t,o),Object(n.guard)({source:c,filter:b||function(){return!0},target:s}),a.on(s,(function(e,r){return r})).on(r,(function(e,r){return r.hasOwnProperty(l)?r[l]:e})).reset(f,d,i,t)}function b(e){var r=e.filter,t=e.domain,o=e.fields,i=e.validateOn,a=e.units,u={},c=[],b=[];for(var m in o)if(o.hasOwnProperty(m)){var v=l(m,o[m],t);u[m]=v,c.push(v.$isDirty),b.push(v.$touched)}var j=function(e){var r={};for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t].$value);return Object(n.combine)(r)}(u),O=function(e){var r=[];for(var t in e)if(e.hasOwnProperty(t)){var o=e[t].$firstError;r.push(o)}return Object(n.combine)(r).map((function(e){return e.every((function(e){return null===e}))}))}(u),g=r?Object(n.combine)(O,r,(function(e,r){return e&&r})):O,p=Object(n.combine)(c).map((function(e){return e.some(Boolean)})),h=Object(n.combine)(b).map((function(e){return e.some(Boolean)})),y=s({domain:t,existing:null==a?void 0:a.validate}),x=s({domain:t,existing:null==a?void 0:a.submit}),E=s({domain:t,existing:null==a?void 0:a.formValidated}),$=s({domain:t,existing:null==a?void 0:a.setForm}),w=s({domain:t,existing:null==a?void 0:a.reset}),S=s({domain:t,existing:null==a?void 0:a.resetValues}),V=s({domain:t,existing:null==a?void 0:a.resetErrors}),T=s({domain:t,existing:null==a?void 0:a.resetTouched}),C=Object(n.sample)(j,x),k=Object(n.sample)(j,y);for(var P in u)if(u.hasOwnProperty(P)){var A=o[P],D=u[P];d(D,$,w,T,S),A.rules&&f({$form:j,rules:A.rules,submitEvent:x,resetFormEvent:w,resetValues:S,resetErrors:V,validateFormEvent:y,field:D,formValidationEvents:i||["submit"],fieldValidationEvents:A.validateOn?A.validateOn:[]})}return Object(n.guard)({source:C,filter:g,target:E}),Object(n.guard)({source:k,filter:g,target:E}),{fields:u,$values:j,$eachValid:O,$isValid:O,$isDirty:p,$touched:h,submit:x,validate:y,resetTouched:T,reset:w,resetValues:S,resetErrors:V,setForm:$,set:$,formValidated:E}}function m(e){var r=Object(o.d)(e.$value),t=Object(o.d)(e.$errors),n=Object(o.d)(e.$firstError),i=Object(o.d)(e.$isValid),a=Object(o.d)(e.$isDirty),u=Object(o.d)(e.$touched);return{name:e.name,value:r,errors:t,firstError:n,isValid:i,isDirty:a,touched:u,isTouched:u,onChange:e.onChange,onBlur:e.onBlur,addError:e.addError,validate:e.validate,reset:e.reset,set:e.onChange,resetErrors:e.resetErrors,hasError:function(){return null!==n},errorText:function(e){return n?e&&e[n.rule]?e[n.rule]:n.errorText||"":""}}}function v(e){var r={};for(var t in e.fields)if(e.fields.hasOwnProperty(t)){var n=e.fields[t];r[t]=m(n)}var i=Object(o.d)(e.$values),a=Object(o.d)(e.$eachValid),u=Object(o.d)(e.$isDirty),c=Object(o.d)(e.$touched);return{fields:r,values:i,hasError:function(e){return e?!!r[e]&&Boolean(r[e].firstError):!a},eachValid:a,isValid:a,isDirty:u,isTouched:c,touched:c,errors:function(e){return r[e]?r[e].errors:[]},error:function(e){return r[e]?r[e].firstError:null},reset:e.reset,errorText:function(e,t){var n=r[e];return n&&n.firstError?t&&t[n.firstError.rule]?t[n.firstError.rule]:n.firstError.errorText||"":""},submit:e.submit,setForm:e.setForm,set:e.setForm,formValidated:e.formValidated}}}}]);
{"version":3,"sources":["pages/home/pages/global-feed/model/model.ts","pages/home/pages/global-feed/ui/pagination.tsx","pages/home/pages/global-feed/model/init.ts","pages/home/pages/global-feed/ui/global-feed.tsx","pages/home/pages/global-feed/index.ts"],"names":[],"mappings":"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","file":"global-feed.edb36d57.js","sourceRoot":"../src","sourcesContent":["import { createEffect, createStore } from 'effector';\nimport { createGate } from 'effector-react';\nimport * as api from 'api';\nimport * as feed from 'features/feed';\nimport { limit } from 'library/limit';\nimport * as types from './types';\n\nexport { changeUrlFx } from 'features/feed';\n\nexport const PageGate = createGate();\nexport const {\n  currentPageSettled,\n  favoriteToggled,\n  $currentPage,\n  $articles,\n  $totalPages,\n  $feed,\n  $pageSize,\n} = feed.createFeedModel();\n\nexport const getFeedFx = createEffect(\n  ({ pageSize, page }: types.getFeedFxArgs) =>\n    api.get<feed.types.Feed>(`/articles?${limit(pageSize, page)}`),\n);\n\nexport const $isFirstBoot = createStore<boolean>(true);\n","import React from 'react';\nimport { useStore } from 'effector-react';\nimport { itemRender } from 'library/item-render';\nimport { Pagination as PaginationUI } from 'ui';\nimport { model } from '../model';\n\ntype Props = Readonly<{\n  path: string;\n}>;\n\nexport const Pagination: React.FC<Props> = ({ path }) => {\n  const total = useStore(model.$totalPages);\n  const current = useStore(model.$currentPage);\n  const pageSize = useStore(model.$pageSize);\n\n  return (\n    <PaginationUI\n      current={current}\n      itemRender={itemRender(path)}\n      pageSize={pageSize}\n      total={total}\n      onChange={model.currentPageSettled}\n    />\n  );\n};\n","import { forward, attach, sample } from 'effector';\nimport * as router from 'library/router';\nimport {\n  PageGate,\n  $isFirstBoot,\n  $feed,\n  $currentPage,\n  $pageSize,\n  currentPageSettled,\n  getFeedFx,\n  changeUrlFx,\n} from './model';\n\n$isFirstBoot.on(getFeedFx.done, () => false);\n\n$feed.on(getFeedFx.doneData, (_, payload) => payload);\n\nforward({\n  from: [PageGate.open, $currentPage],\n  to: attach({\n    source: {\n      pageSize: $pageSize,\n      page: $currentPage,\n    },\n    effect: getFeedFx,\n  }),\n});\n\nsample({\n  source: router.model.$pathname,\n  clock: currentPageSettled,\n  fn: (path, page) => ({ path, page }),\n  target: changeUrlFx,\n});\n","import React from 'react';\nimport { RouteConfigComponentProps } from 'react-router-config';\nimport { useGate, useList, useStore } from 'effector-react';\nimport { ArticlePreview, List, Spinner } from 'ui';\nimport { model } from '../model';\nimport { Pagination } from './pagination';\n\nimport '../model/init';\n\ntype Props = Readonly<RouteConfigComponentProps>;\n\nexport const GlobalFeedPage: React.FC<Props> = ({ match: { path } }) => {\n  useGate(model.PageGate);\n  const loading = useStore(model.$isFirstBoot);\n\n  return (\n    <>\n      <List>\n        {useList(model.$articles, (article) => (\n          <li>\n            <ArticlePreview\n              {...article}\n              onClick={() => model.favoriteToggled(article)}\n            />\n          </li>\n        ))}\n      </List>\n      <Pagination path={path} />\n      <Spinner loading={loading} />\n    </>\n  );\n};\n","export { GlobalFeedPage } from './ui/global-feed';\n"]}
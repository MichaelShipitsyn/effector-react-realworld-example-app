{"version":3,"sources":["pages/profile/pages/favorited-articles/model/model.ts","pages/profile/pages/favorited-articles/ui/pagination.tsx","pages/profile/pages/favorited-articles/model/init.ts","pages/profile/pages/favorited-articles/ui/favorited-articles.tsx"],"names":[],"mappings":"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","file":"favorited-articles.ee56e1a9.js","sourceRoot":"../src","sourcesContent":["import { createEffect, createStore, combine } from 'effector';\nimport { createGate } from 'effector-react';\nimport { status } from 'patronum/status';\nimport * as api from 'api';\nimport * as feed from 'features/feed';\nimport { limit } from 'library/limit';\nimport { types } from '../../../model';\n\nexport { changeUrlFx } from 'features/feed';\n\nexport const getFeedFx = createEffect(\n  ({ username, page, pageSize }: types.GetFeedFxArgs) =>\n    api.get<feed.types.Feed>(\n      `/articles?favorited=${encodeURIComponent(username)}&${limit(\n        pageSize,\n        page,\n      )}`,\n    ),\n);\n\nexport const PageGate = createGate();\nexport const {\n  currentPageSettled,\n  favoriteToggled,\n  $currentPage,\n  $articles,\n  $totalPages,\n  $feed,\n  $pageSize,\n  setUnfavoriteArticleFx,\n} = feed.createFeedModel({\n  pageSize: 5,\n});\n\nexport const $status = status({ effect: getFeedFx });\nexport const $isFirstBoot = createStore<boolean>(true);\nexport const $isEmptyArticles = combine(\n  $status,\n  $articles,\n  (is, articles) => is === 'done' && articles.length === 0,\n);\n","import React from 'react';\nimport { useStore } from 'effector-react';\nimport { itemRender } from 'library/item-render';\nimport { Pagination as PaginationUI } from 'ui';\nimport * as model from '../model/model';\n\ntype Props = Readonly<{\n  path: string;\n}>;\n\nexport const Pagination: React.FC<Props> = ({ path }) => {\n  const total = useStore(model.$totalPages);\n  const current = useStore(model.$currentPage);\n  const pageSize = useStore(model.$pageSize);\n\n  return (\n    <PaginationUI\n      current={current}\n      itemRender={itemRender(path)}\n      pageSize={pageSize}\n      total={total}\n      onChange={model.currentPageSettled}\n    />\n  );\n};\n","import { forward, attach, sample } from 'effector';\nimport * as router from 'library/router';\nimport * as profile from '../../../model';\nimport {\n  $feed,\n  $isFirstBoot,\n  $currentPage,\n  $pageSize,\n  getFeedFx,\n  currentPageSettled,\n  PageGate,\n  changeUrlFx,\n  setUnfavoriteArticleFx,\n} from './model';\n\n$isFirstBoot.on(getFeedFx.done, () => false);\n$feed.on(getFeedFx.doneData, (_, payload) => payload);\n\nforward({\n  from: [PageGate.open, $currentPage, setUnfavoriteArticleFx.done],\n  to: attach({\n    source: {\n      pageSize: $pageSize,\n      username: profile.model.$username,\n      page: $currentPage,\n    },\n    effect: getFeedFx,\n  }),\n});\n\nsample({\n  source: router.model.$pathname,\n  clock: currentPageSettled,\n  fn: (path, page) => ({ path, page }),\n  target: changeUrlFx,\n});\n","import React from 'react';\nimport { RouteConfigComponentProps } from 'react-router-config';\nimport { useGate, useList, useStore } from 'effector-react';\nimport { ArticlePreview, List, Spinner, EmptyArticles } from 'ui';\nimport { model } from '../model';\nimport { Pagination } from './pagination';\n\nimport '../model/init';\n\ntype Props = Readonly<RouteConfigComponentProps>;\n\nexport const FavoritedArticles: React.FC<Props> = ({ match: { url } }) => {\n  useGate(model.PageGate);\n  const loading = useStore(model.$isFirstBoot);\n  const isEmpty = useStore(model.$isEmptyArticles);\n\n  return (\n    <>\n      {isEmpty && <EmptyArticles />}\n      <List>\n        {useList(model.$articles, (article) => (\n          <li>\n            <ArticlePreview\n              {...article}\n              onClick={() => model.favoriteToggled(article)}\n            />\n          </li>\n        ))}\n      </List>\n      <Pagination path={url} />\n      <Spinner loading={loading} />\n    </>\n  );\n};\n"]}
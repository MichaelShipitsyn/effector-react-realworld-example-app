{"version":3,"sources":["pages/registration/model/model.ts","pages/registration/ui/errors.tsx","pages/registration/ui/input-field.tsx","pages/registration/ui/submit-button.tsx","pages/registration/ui/form.tsx","pages/registration/model/init.ts","pages/registration/ui/registration.tsx","pages/registration/index.ts"],"names":[],"mappings":"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","file":"registration.460478b8.js","sourceRoot":"../src","sourcesContent":["import { createStore, createEffect } from 'effector';\nimport * as api from 'api';\nimport * as authUser from 'features/user';\nimport { createFormEvents } from 'library/form';\nimport * as types from './types';\n\nexport const {\n  fieldChanged,\n  handleFieldChanged,\n  formSubmitted,\n} = createFormEvents();\n\nexport const signUpFx = createEffect<\n  types.Form,\n  authUser.types.User,\n  types.ErrorType\n>({\n  handler: ({ username, email, password }) =>\n    api\n      .post<authUser.types.SignUpFxDone>('/users', {\n        user: { email, password, username },\n      })\n      .then((x) => x.user),\n});\n\nexport const $form = createStore<types.Form>({\n  username: '',\n  email: '',\n  password: '',\n});\n\nexport const $errors = createStore<types.ErrorType>({\n  errors: [],\n});\n","import React from 'react';\nimport { useStore } from 'effector-react';\nimport { ErrorList } from 'ui';\nimport { model } from '../model';\n\nexport const Errors: React.FC = () => {\n  const errors = useStore(model.$errors);\n\n  return <ErrorList errors={errors} />;\n};\n","import React from 'react';\nimport { useFormField } from 'library/form';\nimport { FormGroup, Input, InputProps } from 'ui';\nimport { model } from '../model';\n\ntype Props = InputProps & { name: string };\n\nexport const InputField: React.FC<Props> = ({ name, ...props }) => {\n  const value = useFormField({\n    store: model.$form,\n    name,\n  });\n\n  return (\n    <FormGroup>\n      <Input name={name} value={value} {...props} />\n    </FormGroup>\n  );\n};\n","import React from 'react';\nimport { useStore } from 'effector-react';\nimport { Button } from 'ui';\nimport { model } from '../model';\n\nexport const SubmitButton: React.FC = () => {\n  const disabled = useStore(model.signUpFx.pending);\n\n  return (\n    <Button\n      className=\"btn btn-lg btn-primary pull-xs-right\"\n      disabled={disabled}\n      type=\"submit\">\n      Sign Up\n    </Button>\n  );\n};\n","import React from 'react';\nimport { Form as UIForm } from 'ui';\nimport { model } from '../model';\nimport { InputField } from './input-field';\nimport { SubmitButton } from './submit-button';\n\nexport const Form: React.FC = () => (\n  <UIForm onSubmit={model.formSubmitted}>\n    <InputField\n      className=\"form-control-lg\"\n      name=\"username\"\n      onChange={model.handleFieldChanged}\n    />\n\n    <InputField\n      className=\"form-control-lg\"\n      name=\"email\"\n      type=\"email\"\n      onChange={model.handleFieldChanged}\n    />\n\n    <InputField\n      autoComplete=\"current-password\"\n      className=\"form-control-lg\"\n      name=\"password\"\n      type=\"password\"\n      onChange={model.handleFieldChanged}\n    />\n    <SubmitButton />\n  </UIForm>\n);\n","import { sample } from 'effector';\nimport { model } from 'features/user';\nimport { $form, $errors, formSubmitted, fieldChanged, signUpFx } from './model';\n\nformSubmitted.watch((e) => e.preventDefault());\n\n$form.on(fieldChanged, (state, payload) => ({ ...state, ...payload }));\n\nsample({\n  source: $form,\n  clock: formSubmitted,\n  target: signUpFx,\n});\n\nmodel.$user.on(signUpFx.doneData, (_, payload) => payload);\n\n$errors.on(signUpFx.failData, (_, payload) => payload).reset(fieldChanged);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Paths } from 'library/router';\nimport { Page, Row } from 'ui';\nimport { Errors } from './errors';\nimport { Form } from './form';\n\nimport '../model/init';\n\nexport const RegistrationPage: React.FC = () => (\n  <Page>\n    <Row>\n      <div className=\"col-md-6 offset-md-3 col-xs-12\">\n        <h1 className=\"text-xs-center\">Sign Up</h1>\n\n        <p className=\"text-xs-center\">\n          <Link to={Paths.LOGIN}>Have an account?</Link>\n        </p>\n\n        <Errors />\n        <Form />\n      </div>\n    </Row>\n  </Page>\n);\n","export { RegistrationPage } from './ui/registration';\n"]}
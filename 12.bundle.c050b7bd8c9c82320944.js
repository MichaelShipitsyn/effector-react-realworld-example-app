(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"38gM":function(e,t,n){"use strict";n.r(t),n.d(t,"ArticlePage",(function(){return Z}));var r=n("mXGw"),a=n.n(r),c=n("dY8W"),o=n("nOdE"),u=n("TW3H"),l=n("UYjC"),i=n("USb2"),m=n("rPMT"),s=n("SugE"),f=n("xArF"),d=n("eZyy");function b(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t,n,r,a,c,o){try{var u=e[c](o),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){O(c,r,a,o,u,"next",e)}function u(e){O(c,r,a,o,u,"throw",e)}o(void 0)}))}}var E=Object(s.d)(),v=Object(s.c)(function(){var e=g(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("articles/".concat(t,"/comments"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r.comments);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(s.c)(function(){var e=g(regeneratorRuntime.mark((function e(t){var n,r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slug,r=t.body,e.next=3,d.a.post("articles/".concat(n,"/comments"),{body:r});case 3:return a=e.sent,c=a.data,e.abrupt("return",c.comment);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=Object(s.c)((function(e){var t=e.slug,n=e.id;return d.a.delete("articles/".concat(t,"/comments/").concat(n))})),h=Object(c.a)(),w=h.state.map((function(e){return e.slug})),N=Object(s.e)([]).on(v.doneData,(function(e,t){return t})).on(j.doneData,(function(e,t){return[t].concat(b(e))})).on(y.done,(function(e,t){var n=t.params;return e.filter((function(e){return e.id!==n.id}))})),A=Object(f.a)({fields:{comment:{init:""}}});Object(s.f)({from:w.updates,to:Object(s.a)({source:w,effect:v})}),Object(s.f)({from:A.submit,to:Object(s.a)({source:{slug:w,body:A.fields.comment.$value},effect:j})}),Object(s.f)({from:j,to:A.reset}),Object(s.i)({source:w,clock:E,fn:function(e,t){return{slug:e,id:t}},target:y});var k=Object(s.e)({errors:{}}).on([j.failData,y.failData],(function(e,t){var n;return null===(n=t.response)||void 0===n?void 0:n.data})).reset(A.$touched),P=n("Szyw"),S=function(e){var t=e.onClick;return a.a.createElement(l.b,{className:"mod-options btn-delete",onClick:t},a.a.createElement("i",{className:"ion-trash-a"}))},D=function(e){var t=e.author,n=e.createdAt,r=e.id,o=Object(c.d)(P.a.$user).username===t.username;return a.a.createElement("div",{className:"card-footer"},a.a.createElement(i.a,{className:"comment-author",to:"/@".concat(t.username)},a.a.createElement("img",{alt:t.username,className:"comment-author-img",src:t.image}))," ",a.a.createElement(i.a,{className:"comment-author",to:"/@".concat(t.username)},t.username),a.a.createElement("span",{className:"date-posted"},new Date(n).toDateString()),a.a.createElement(m.a,{check:"auth"},o&&a.a.createElement(S,{onClick:function(){return E(r)}})))},x=function(e){var t=e.comment;return a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-block"},a.a.createElement("p",{className:"card-text"},t.body)),a.a.createElement(D,t))},C=function(){return a.a.createElement(l.i,null,Object(c.c)(N,(function(e){return a.a.createElement(x,{comment:e})})))},$=function(){var e=Object(c.d)(k);return a.a.createElement(l.d,{errors:e})},I=function(){var e=Object(c.d)(P.a.$user),t=e.image,n=e.username;return a.a.createElement("div",{className:"card-footer"},a.a.createElement("img",{alt:n,className:"comment-author-img",src:t}),a.a.createElement(l.b,{className:"btn-sm btn-primary",type:"submit"},"Post Comment"))},R=function(){var e=Object(f.c)(A),t=e.submit,n=e.fields;return a.a.createElement(l.e,{className:"card comment-form",onSubmit:function(e){e.preventDefault(),t()}},a.a.createElement("div",{className:"card-block"},a.a.createElement(l.s,{placeholder:"Write a comment...",rows:3,value:n.comment.value,onChange:function(e){return n.comment.onChange(e.target.value)}})),a.a.createElement(I,null))},F=function(e){var t=e.slug;return Object(c.b)(h,{slug:t}),a.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},a.a.createElement(m.a,{check:"auth"},a.a.createElement($,null),a.a.createElement(R,null)),a.a.createElement(m.a,{check:"anon"},a.a.createElement("p",null,a.a.createElement(i.a,{to:"/login"},"Sign in")," or ",a.a.createElement(i.a,{to:"/register"},"sign up")," to add comments on this article.")),a.a.createElement(C,null))};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var W=Object(s.d)(),J=Object(s.c)((function(e){return d.a.get("articles/".concat(e)).then((function(e){return e.data.article})).then((function(e){var t=e.createdAt;return M(M({},U(e,["createdAt"])),{},{createdAt:new Date(t).toDateString()})}))})),Y=Object(s.c)((function(e){return d.a.delete("articles/".concat(e))})),q=Object(c.a)(),z=q.state.map((function(e){return e.slug})),G=Object(s.e)({title:"",slug:"",body:"",createdAt:"",updatedAt:"",tagList:[],description:"",author:{username:"",bio:"",image:"",following:!1},favorited:!1,favoritesCount:0}).on(J.doneData,(function(e,t){return t})),H=Object(s.b)(G,P.a.$user,(function(e,t){return e.author.username===t.username}));Object(s.f)({from:q.open,to:Object(s.a)({source:z,effect:J})}),Object(s.f)({from:W,to:Object(s.a)({source:z,effect:Y})}),Y.done.watch((function(){m.d.history.push("/")}));var X=function(){var e=Object(c.d)(H),t=Object(c.d)(G).slug;return a.a.createElement(a.a.Fragment,null,e&&a.a.createElement("span",null,a.a.createElement(i.a,{to:"/editor/".concat(t)},a.a.createElement(l.b,{className:"btn-sm btn-outline-secondary"},a.a.createElement("i",{className:"ion-edit"})," Edit Article")),a.a.createElement(l.b,{className:"btn-sm btn-outline-danger",onClick:W},a.a.createElement("i",{className:"ion-trash-a"})," Delete Article")))},Z=function(e){var t=e.match.params.slug;Object(c.b)(q,{slug:t});var n=Object(c.d)(G),r=n.title,i=n.author,m=n.createdAt,s=n.body,f=n.tagList,d=Object(c.d)(J.pending);return a.a.createElement(a.a.Fragment,null,!d&&a.a.createElement("div",{className:"article-page"},a.a.createElement(l.a,null,a.a.createElement(l.c,null,a.a.createElement("h1",null,r),a.a.createElement(u.a,{author:i,createdAt:m},a.a.createElement(X,null)))),a.a.createElement(l.l,null,a.a.createElement(l.n,{className:"article-content"},a.a.createElement("div",{className:"col-xs-12"},a.a.createElement(o.a,null,s),a.a.createElement(l.q,null,f.map((function(e){return a.a.createElement(l.p,{key:e},e.toLowerCase())}))))),a.a.createElement("hr",null),a.a.createElement("div",{className:"article-actions"}),a.a.createElement(l.n,null,a.a.createElement(F,{slug:t}),a.a.createElement("div",null)))))}}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"I+tg":function(e,t,r){"use strict";r.r(t),r.d(t,"EditorPage",(function(){return Y}));var n=r("mXGw"),o=r.n(n),i=r("dY8W"),a=r("UYjC"),u=r("xArF"),l=r("SugE"),c=Object(l.d)(),s=Object(l.d)(),f=Object(u.a)({fields:{currentTag:{init:""}}});Object(l.j)({source:f.fields.currentTag.$value,clock:Object(l.g)(s,{filter:function(e){return"Enter"===e.key}}),target:c}),Object(l.f)({from:c,to:f.reset});var d=function(){var e=Object(u.c)(f).fields;return o.a.createElement(a.e,{onSubmit:function(e){return e.preventDefault()}},o.a.createElement(a.g,{autoComplete:"off",name:"tag-list",placeholder:"Enter tags",value:e.currentTag.value,onChange:function(t){return e.currentTag.onChange(t.target.value)},onKeyDown:s}))},m=r("eZyy"),b=r("rPMT");function v(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var y=Object(l.d)();y.watch((function(e){return e.preventDefault()}));var E=Object(l.d)(),$=Object(l.c)((function(e){return m.a.post("articles",{article:e}).then((function(e){return e.data.article}))})),x=Object(l.c)((function(e){return m.a.get("articles/".concat(e)).then((function(e){var t=e.data.article;return{slug:t.slug,title:t.title,description:t.description,body:t.body,tagList:t.tagList}}))})),w=Object(i.a)(),S=w.state.map((function(e){return e.slug})),V=S.map(Boolean),T=V.map((function(e){return!e})),C=Object(u.a)({fields:{slug:{init:""},title:{init:""},description:{init:""},body:{init:""},tagList:{init:[]}}}),k=C.fields.tagList.$value;Object(l.g)({source:w.open,filter:V,target:Object(l.a)({source:S,effect:x})}),Object(l.f)({from:x.doneData,to:C.set}),Object(l.j)({source:C.$values,clock:c,fn:function(e,t){var r,n=e.tagList;return O(O({},h(e,["tagList"])),{},{tagList:(r=[].concat(v(n),[t]),Array.from(new Set(r)))})},target:C.set}),Object(l.j)({source:C.$values,clock:E,fn:function(e,t){var r=e.tagList;return O(O({},h(e,["tagList"])),{},{tagList:r.filter((function(e){return e!==t}))})},target:C.set}),Object(l.f)({from:[$.done,T],to:C.reset}),Object(l.j)({source:C.$values,clock:C.submit,target:$}),$.doneData.watch((function(e){var t=e.slug;b.d.history.replace("/article/".concat(t))}));var P=Object(l.e)({errors:{}}).on($.failData,(function(e,t){var r;return null===(r=t.response)||void 0===r?void 0:r.data})).reset(C.$values,w.close),A=function(){var e=Object(i.d)(P);return o.a.createElement(a.d,{errors:e})},D=function(){var e=Object(u.b)(C.fields.body),t=e.value,r=e.name,n=e.onChange;return o.a.createElement(a.r,{name:r,placeholder:"Write your article (in markdown)",rows:8,value:t,onChange:function(e){return n(e.target.value)}})},F=function(){var e=Object(u.b)(C.fields.description),t=e.value,r=e.name,n=e.onChange;return o.a.createElement(a.h,{name:r,placeholder:"What's this article about?",value:t,onChange:function(e){return n(e.target.value)}})},L=function(){var e=Object(u.b)(C.fields.title),t=e.value,r=e.name,n=e.onChange;return o.a.createElement(a.h,{className:"form-control-lg",name:r,placeholder:"Article Title",value:t,onChange:function(e){return n(e.target.value)}})},B=function(){return o.a.createElement(a.e,{id:"editor",onSubmit:y},o.a.createElement(L,null),o.a.createElement(F,null),o.a.createElement(D,null))},I=function(){var e=Object(u.c)(C).submit,t=Object(i.d)($.pending);return o.a.createElement(a.b,{className:"btn-lg btn-primary pull-xs-right",disabled:t,form:"editor",type:"submit",onClick:function(t){t.preventDefault(),e()}},"Publish article")},N=function(e){var t=e.children,r=e.onClick;return o.a.createElement("span",{className:"tag-default tag-pill"},t,o.a.createElement(a.b,{className:"btn-sm editor-tag",onClick:r},o.a.createElement("i",{className:"ion-close-round"})))},W=function(){return o.a.createElement(a.q,null,Object(i.c)(k,(function(e){return o.a.createElement(N,{onClick:function(){return E(e)}},e)})))},Y=function(e){var t=e.match.params.slug;return Object(i.b)(w,{slug:t}),o.a.createElement(a.l,null,o.a.createElement(a.n,null,o.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},o.a.createElement(A,null),o.a.createElement(B,null),o.a.createElement(d,null),o.a.createElement(W,null),o.a.createElement(I,null))))}},xArF:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return v}));var n=r("YSF1"),o=r("dY8W");function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=function(e){var t=e.init,r=e.domain;return e.existing||(r?r.store(t):Object(n.createStore)(t))},c=function(e){var t=e.domain;return e.existing||(t?t.event():Object(n.createEvent)())};function s(e,t,r){var n,o,i,a,u,s,f,d,m,b,v,g="function"==typeof t.init?t.init():t.init,p=l({domain:r,existing:null===(n=t.units)||void 0===n?void 0:n.$value,init:g}),O=l({domain:r,existing:null===(o=t.units)||void 0===o?void 0:o.$errors,init:[]}),j=O.map((function(e){return e[0]?e[0]:null})),h=p.map((function(e){return e!==g})),y=l({domain:r,existing:null===(i=t.units)||void 0===i?void 0:i.$isTouched,init:!1}),E=c({domain:r,existing:null===(a=t.units)||void 0===a?void 0:a.onChange}),$=c({domain:r,existing:null===(u=t.units)||void 0===u?void 0:u.onBlur}),x=c({domain:r,existing:null===(s=t.units)||void 0===s?void 0:s.changed}),w=c({domain:r,existing:null===(f=t.units)||void 0===f?void 0:f.addError}),S=c({domain:r,existing:null===(d=t.units)||void 0===d?void 0:d.validate}),V=c({domain:r,existing:null===(m=t.units)||void 0===m?void 0:m.resetErrors}),T=c({domain:r,existing:null===(b=t.units)||void 0===b?void 0:b.resetValue}),C=c({domain:r,existing:null===(v=t.units)||void 0===v?void 0:v.reset});return{changed:x,name:e,$value:p,$errors:O,$firstError:j,$isValid:j.map((function(e){return null===e})),$isDirty:h,$isTouched:y,$touched:y,onChange:E,onBlur:$,addError:w,validate:S,set:E,reset:C,resetErrors:V,resetValue:T,filter:t.filter}}function f(e){var t,r=e.$form,o=e.validateFormEvent,a=e.submitEvent,l=e.resetFormEvent,c=e.resetValues,s=e.field,f=e.rules,d=e.resetErrors,m=e.formValidationEvents,b=e.fieldValidationEvents,v=s.$value,g=s.$errors,p=s.onBlur,O=s.changed,j=s.addError,h=s.validate,y=s.resetErrors,E=s.resetValue,$=s.reset,x=Object(n.combine)(f.map((function(e){return e.source||Object(n.createStore)(null)}))),w=(t=f,function(e,r,n){for(var o=[],i=0;i<t.length;i++){var a=t[i],l=n?n[i]:null,c=a.validator(e,r,l);"boolean"!=typeof c||c||o.push({rule:a.name,errorText:a.errorText,value:e}),"object"!=u(c)||c.isValid||o.push({rule:a.name,errorText:c.errorText,value:e})}return o}),S=[].concat(i(m),i(b)),V=[];S.includes("submit")&&V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:r,rulesSources:x}),clock:a})),S.includes("blur")&&V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:r,rulesSources:x}),clock:p})),S.includes("change")&&V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:r,rulesSources:x}),clock:Object(n.merge)([O,E,c])})),V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:r,rulesSources:x}),clock:h})),V.push(Object(n.sample)({source:Object(n.combine)({fieldValue:v,form:r,rulesSources:x}),clock:o}));var T=Object(n.sample)({source:v,clock:j,fn:function(e,t){return{rule:t.rule,value:e,errorText:t.errorText}}});g.on(V,(function(e,t){var r=t.form,n=t.fieldValue,o=t.rulesSources;return w(n,r,o)})).on(T,(function(e,t){return[t].concat(i(e))})).reset(y,l,$,d),S.includes("change")||g.reset(O)}function d(e,t,r,o,i){var a=e.$value,u=e.$touched,l=e.onChange,c=e.changed,s=e.name,f=e.reset,d=e.resetValue,m=e.filter;u.on(c,(function(){return!0})).reset(f,r,o),Object(n.guard)({source:l,filter:m||function(){return!0},target:c}),a.on(c,(function(e,t){return t})).on(t,(function(e,t){return t.hasOwnProperty(s)?t[s]:e})).reset(f,d,i,r)}function m(e){var t=e.filter,r=e.domain,o=e.fields,i=e.validateOn,a=e.units,u={},l=[],m=[];for(var b in o)if(o.hasOwnProperty(b)){var v=s(b,o[b],r);u[b]=v,l.push(v.$isDirty),m.push(v.$touched)}var g=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r].$value);return Object(n.combine)(t)}(u),p=function(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var o=e[r].$firstError;t.push(o)}return Object(n.combine)(t).map((function(e){return e.every((function(e){return null===e}))}))}(u),O=t?Object(n.combine)(p,t,(function(e,t){return e&&t})):p,j=Object(n.combine)(l).map((function(e){return e.some(Boolean)})),h=Object(n.combine)(m).map((function(e){return e.some(Boolean)})),y=c({domain:r,existing:null==a?void 0:a.validate}),E=c({domain:r,existing:null==a?void 0:a.submit}),$=c({domain:r,existing:null==a?void 0:a.formValidated}),x=c({domain:r,existing:null==a?void 0:a.setForm}),w=c({domain:r,existing:null==a?void 0:a.reset}),S=c({domain:r,existing:null==a?void 0:a.resetValues}),V=c({domain:r,existing:null==a?void 0:a.resetErrors}),T=c({domain:r,existing:null==a?void 0:a.resetTouched}),C=Object(n.sample)(g,E),k=Object(n.sample)(g,y);for(var P in u)if(u.hasOwnProperty(P)){var A=o[P],D=u[P];d(D,x,w,T,S),A.rules&&f({$form:g,rules:A.rules,submitEvent:E,resetFormEvent:w,resetValues:S,resetErrors:V,validateFormEvent:y,field:D,formValidationEvents:i||["submit"],fieldValidationEvents:A.validateOn?A.validateOn:[]})}return Object(n.guard)({source:C,filter:O,target:$}),Object(n.guard)({source:k,filter:O,target:$}),{fields:u,$values:g,$eachValid:p,$isValid:p,$isDirty:j,$touched:h,submit:E,validate:y,resetTouched:T,reset:w,resetValues:S,resetErrors:V,setForm:x,set:x,formValidated:$}}function b(e){var t=Object(o.d)(e.$value),r=Object(o.d)(e.$errors),n=Object(o.d)(e.$firstError),i=Object(o.d)(e.$isValid),a=Object(o.d)(e.$isDirty),u=Object(o.d)(e.$touched);return{name:e.name,value:t,errors:r,firstError:n,isValid:i,isDirty:a,touched:u,isTouched:u,onChange:e.onChange,onBlur:e.onBlur,addError:e.addError,validate:e.validate,reset:e.reset,set:e.onChange,resetErrors:e.resetErrors,hasError:function(){return null!==n},errorText:function(e){return n?e&&e[n.rule]?e[n.rule]:n.errorText||"":""}}}function v(e){var t={};for(var r in e.fields)if(e.fields.hasOwnProperty(r)){var n=e.fields[r];t[r]=b(n)}var i=Object(o.d)(e.$values),a=Object(o.d)(e.$eachValid),u=Object(o.d)(e.$isDirty),l=Object(o.d)(e.$touched);return{fields:t,values:i,hasError:function(e){return e?!!t[e]&&Boolean(t[e].firstError):!a},eachValid:a,isValid:a,isDirty:u,isTouched:l,touched:l,errors:function(e){return t[e]?t[e].errors:[]},error:function(e){return t[e]?t[e].firstError:null},reset:e.reset,errorText:function(e,r){var n=t[e];return n&&n.firstError?r&&r[n.firstError.rule]?r[n.firstError.rule]:n.firstError.errorText||"":""},submit:e.submit,setForm:e.setForm,set:e.setForm,formValidated:e.formValidated}}}}]);